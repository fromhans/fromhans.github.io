---
date: 2021-09-01
title: "LVM 기본 개념의 이해"
categories: linux
tags:
    - linux
    - lvm
    - volume
# 목차
toc: true
toc_sticky: true
---
# *LVM 기본 개념의 이해
# **리눅스 LVM (Logical Volume Manager) 의 개념**

[https://camo.githubusercontent.com/6119ddd30bcb08eadcdcc27a8023453354a9823bfa17cd2c1c9ef53119e598df/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323530334434334435344239354541373132](https://camo.githubusercontent.com/6119ddd30bcb08eadcdcc27a8023453354a9823bfa17cd2c1c9ef53119e598df/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323530334434334435344239354541373132)

- LVM 사용시 파일시스템은 물리 디바이스에 읽기/쓰기를 하기 전에 LVM이라는 가상의 레이어를 거쳐서 읽기/쓰기를 처리함
- LVM 을 사용할 경우, 다음과 같은 장점이 존재
    - 유연한 용량
    - 크기 조정 가능한 스토리지 풀(Pool)
    - 온라인 데이터 재배치
    - 편의에 따라 장치 이름 지정
    - 디스크 스트라이핑
    - 미러 볼륨
    - 볼륨 스냅샷

# **LVM 용어 및 설명 ([https://kit2013.tistory.com/199](https://kit2013.tistory.com/199))**

lsblk를 통해 스토리지 디바이스 정보를 확인할 수 있다. fdisk -l을 통해 파티션 정보를 확인할 수 있다. fdisk -l에서의 디바이스명을 pvdisplay, lvdisp

- 블록 디바이스
    - 물리적 장치
    - lsblk 명령어 맨 좌측에 기재
- PV (Physical Volume)
    - 블록 장치 전체 또는 그 블록 장치를 이루고 있는 파티션들을 LVM에서 사용할 수 있게 변환한것
    - LVM에서 블록 디바이스를 사용하기 위해서는 PV로 초기화해야한다
    - pvdisplay로 조회
- PE (Physical Extent)
    - PV를 구성하는 일정한 크기의 블록으로 LVM2에서의 기본크기는 4MB이다. LV(Logical Volume)의 LE(Logical Extent)들과 1:1로 맵핑된다. 그렇기에 항상 PE와 LE의 크기는 동일하다.
    - 즉, 아래 그림과 같은 모습이다.

    [https://camo.githubusercontent.com/a6cb6b2e8520314afd18d4941eb00a0470c9e51d8ac645d99a8ef731296932c8/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323431443546343135344237384535453231](https://camo.githubusercontent.com/a6cb6b2e8520314afd18d4941eb00a0470c9e51d8ac645d99a8ef731296932c8/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323431443546343135344237384535453231)

- VG (Volume Group)
    - PV들의 집합으로 LV를 할당할 수 있는 공간
    - PV들로 VG를 생성하는 과정은 LV로 할당할 수 있는 디스크 공간의 풀(Pool)을 생성하는것으로 보면 된다.
    - 사용자는 VG안에서 원하는데로 공간을 쪼개서 LV로 만들 수 있다. 아래 그림과 같이 위에서만든 PV들을 하나의 VG1로 묶었다.
    - vgdisplay

        [https://camo.githubusercontent.com/aa9b608610a330f65ef7ce90ec81c0ef670d9320cc599d3ede77bfce28f59fac/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323731303830343135344237384535453330](https://camo.githubusercontent.com/aa9b608610a330f65ef7ce90ec81c0ef670d9320cc599d3ede77bfce28f59fac/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323731303830343135344237384535453330)

- LV (Logical Volume)
    - 사용자가 최종적으로 다루게되는 논리적인 스토리지
    - LV를 구성하는 LE들이 PV의 PE들과 맵핑하면서 존재
    - lvdisplay

        [https://camo.githubusercontent.com/ab690a8eea3d80326af98a2c721dcfe3736f417ab17dab707e5287a2f050b965/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323233303843343135344237384535453043](https://camo.githubusercontent.com/ab690a8eea3d80326af98a2c721dcfe3736f417ab17dab707e5287a2f050b965/68747470733a2f2f696d67312e6461756d63646e2e6e65742f7468756d622f523132383078302f3f73636f64653d6d746973746f72793226666e616d653d687474707325334125324625324674312e6461756d63646e2e6e65742532466366696c65253246746973746f7279253246323233303843343135344237384535453043)

- 맵핑 방식에 따른 LV
    - Linear
    - Striped
        - Round-Round 방식으로 미리 지정된 PV들에 데이터를 분산 기록해서 성능을 높임
        - 읽고/쓰기를 병렬로 실행 가능
    - Mirrored

이미지출처: https://kit2013.tistory.com/199